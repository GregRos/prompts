---
applyTo: "**/*.{ts,js,tsx,jsx}"
---
> WHEN:
> - Writing tests

## File-level
ALWAYS group related test cases into separate files
NEVER write a test file that is very long (~500 lines)
CONSIDER using at least 2 test files
ALWAYS use folders to organize test files
ALWAYS place test files in a dedicated folder
ALWAYS give test files meaningful names
ALWAYS use helpers WHEN defining things shared by multiple test files
ALWAYS name test files `*.test.ts`. Name test helpers `*.ts`
## Test-level
NEVER nest the top level of tests in a `describe` or similar
AVOID `describe`
AVOID all setup/teardown callbacks
ALWAYS write small, specific test cases
ALWAYS give test cases concise and meaningful titles
NEVER write cases with more than 4 assertions
PREFER `test.each` or similar where appropriate
## Data structures
WHEN testing a data structure that has elements:
- ALWAYS have a test file for 0 elements.
- ALWAYS have a test file for 1 element.
## Test code
NEVER use mocks for parts of the project being tested
ALWAYS use mocks for external systems like databases
## Test helpers
ALWAYS define helpers at the module scope or in a helper file
NEVER write more than 1 line of init per test
ALWAYS make sure test target is a fresh clone or immutable
