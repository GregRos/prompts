# Python rules
> % ONLY APPLY
> - when writing python code.

## Package manager
ALWAYS use Python >=3.12
ALWAYS use Poetry
## Type hints
### Usage of types

ALWAYS use `list[T]`, NEVER `List[T]`
ALWAYS use `T | None`, NEVER `Optional[T]`
ALWAYS use `T1 | T2`, NEVER `Union[T1, T2]`
NEVER use `TypeVar` WHEN defining generic types
ALWAYS use `type X = Y` WHEN defining type aliases
CONSIDER sensible defaults for type parameters

### Function parameters
ALWAYS declare parameters with type hints
NEVER declare functions with more than 4 positional parameters
### Declarations
PREFER `@property` over method with no arguments
PREFER `@cached_property` if the value can never change
ALWAYS declare attributes with type hints
ALWAYS declare overrides with `@override`

### Data classes
PREFER dataclasses:
- PREFER `kw_only`, `eq`
- AVOID `frozen`
NEVER use dataclasses WHEN:
- Class transforms a constructor argument
- Class requires custom `__init__`
### Decorator
CONSIDER adding `@total_ordering` when defining comparison
## Tooling
ALWAYS check your code has no type errors using e.g. `pyright`
