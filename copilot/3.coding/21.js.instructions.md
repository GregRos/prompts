---
applyTo: ${tsJs}
---
# Writing JS/TS
## WHEN: Starting a chat
> WHEN:
> - starting a new chat

ALWAYS check if project uses ESM, CJS, or both:
- Check in agent information files.
- Check for `tsconfig` files with substrings `esm` or `cjs`.
## General
ALWAYS use ES2022 or higher.
ALWAYS use TypeScript. 
NEVER use JavaScript.

## Imports
```ts instructions
//! NEVER:
import * as Foo from "foo"
const x = Foo.bar()
//! ALWAYS:
import {bar} from "foo"
const y = bar()
//! WHEN names conflict, ALWAYS:
import {bar as barFoo} from "foo"
const y = barFoo()
```
## Comparisons
ALWAYS use `== null` WHEN checking for null or undefined.
ALWAYS use epsilon WHEN comparing floating points.
ALWAYS use `?.` WHEN value may actually be undefined.

## Declarations
PREFER lambda functions over anonymous functions.
NEVER use JS `#private` fields.
NEVER use `function` as a constructor.
## Loops
PREFER `for .. of` loops.
NEVER write `for .. in` loops

## Classes
PREFER using a class WHEN:
- Two functions share an argument.
- Function takes more than ~4 arguments.





